<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
		<script th:src="@{/resources/js/guestbook.js}"></script>
		<link rel="stylesheet" th:href="@{/webjars/materializecss/css/materialize.min.css}" type="text/css" />
		<link rel="stylesheet" th:href="@{/webjars/font-awesome/css/all.css}" type="text/css" />
		<link rel="stylesheet" th:href="@{/resources/css/style.css}" type="text/css" />
		<title th:text="#{guestbook.title}">Gästebuch</title>
	</head>
	<body>
	  <nav class="green" role="navigation">
		<div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Fitness Studio</a>
		<ul class="right hide-on-med-and-down">
			<li><a href="#">Nutzer</a></li>
			<li><a href="#">Kommentare</a></li>
		</ul>

		<ul id="nav-mobile" class="sidenav">
			<li><a href="#">Nutzer</a></li>
			<li><a href="#">Kommentare</a></li>
		</ul>
		<a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
		</div>
	</nav>
  <div class="container"  style="padding:10px">
    <div class="section z-depth-4">
	<div class="section no-pad-bot" id="index-banner">
    <div class="container">
	  <h1 class="text-center" th:text="#{guestbook.title}">Gästebuch</h1>
		
		<label class="checkbox text-center">
			<input type="checkbox" id="use_ajax" />
			<label for="use_ajax" th:text="#{guestbook.useajax}">Ajax nutzen</label>
		</label>
		
		<div class="text-center">
			<a sec:authorize="isAnonymous()" href="/login">Login</a>
			<a sec:authorize="isAuthenticated()" href="/logout">Logout</a>
		</div>
    </div>
  </div>
  <div class="container"  style="padding:10px; ">
	<div id="entries" class="mx-auto">			
		<div th:each="entry, it : ${entries}" th:with="index = ${it.count}">
			<br><hr>
			<div th:fragment="entry" th:id="entry+${entry.id}">
				<div>
					<form sec:authorize="hasRole('ADMIN')" th:method="delete" th:action="@{/guestbook/{id}(id=${entry.id})}" th:attr="data-entry-id=${entry.id}">
						<button th:title="#{guestbook.form.delete}" class="btn btn-sm float-right">
							<span class="fas fa-times"></span>
						</button>
					</form>
					<h4 th:text="${index} + '. ' + ${entry.name}">
						<i class="material-icons circle">folder</i> 1. Posting
					</h4>
				</div>
				<i th:text="${entry.text}"></i> <br>
				<p class="right-align">
					<footer class="date left" th:text="${entry.mail}">Mail</footer>
					<footer class="date right" th:text="${#temporals.format(entry.date, 'dd. MMMM yyyy - HH:mm')}">Datum</footer>
				</p>
			</div>
		</div>
	</div>
  </div>

  <br><hr><br><br>

  <div class="container z-depth-1"  style="padding:10px">
	<h4>Kommentieren</h4>
	<form method="post" role="form" class="gb-form" id="form" th:action="@{/guestbook}" th:object="${form}">
		<div class="form-group">
			<label for="name" th:text="#{guestbook.form.name}">Name</label><br /> 
			<input class="form-control" type="text" th:field="*{name}" th:errorclass="is-invalid" required="required" />
			<div th:if="${#fields.hasErrors('name')}" class="invalid-feedback" th:text="#{guestbook.form.name.required}">Please provide a name.</div> 
		</div>
		<div class="form-group">
			<label for="mail" th:text="#{guestbook.form.mail}">Name</label><br /> 
			<input class="form-control" type="text" th:field="*{mail}" th:errorclass="is-invalid" required="required" />
			<div th:if="${#fields.hasErrors('mail')}" class="invalid-feedback" th:text="#{guestbook.form.mail.required}">Please provide a mail.</div> 
		</div>
		<div class="form-group">
			<label for="text" th:text="#{guestbook.form.text}">Text</label><br /> 
			<textarea th:field="*{text}" th:errorclass="is-invalid" class="form-control" required="required"></textarea>
			<div th:if="${#fields.hasErrors('text')}" class="invalid-feedback" th:text="#{guestbook.form.text.required}">Please provide a text.</div>
		</div>
		<input type="submit" class="btn btn-secondary" th:value="#{guestbook.form.submit}" value="Senden" />
	</form>

		</div>
	</div>
</div>

	 <footer class="page-footer green darken-4" style="margin-top:30px">
		<div class="container">
		<div class="row">
			<div class="col l6 s12">
			<h5 class="white-text">Company Bio</h5>
			<p class="grey-text text-lighten-4">We are a team of college students working on this project like it's our full time job. Any amount would help support and continue development on this project and is greatly appreciated.</p>


			</div>
			<div class="col l3 s12">
			<h5 class="white-text">Settings</h5>
			<ul>
				<li><a class="white-text" href="#!">Link 1</a></li>
				<li><a class="white-text" href="#!">Link 2</a></li>
				<li><a class="white-text" href="#!">Link 3</a></li>
				<li><a class="white-text" href="#!">Link 4</a></li>
			</ul>
			</div>
			<div class="col l3 s12">
			<h5 class="white-text">Connect</h5>
			<ul>
				<li><a class="white-text" href="#!">Link 1</a></li>
				<li><a class="white-text" href="#!">Link 2</a></li>
				<li><a class="white-text" href="#!">Link 3</a></li>
				<li><a class="white-text" href="#!">Link 4</a></li>
			</ul>
			</div>
		</div>
		</div>
		<div class="footer-copyright">
		<div class="container">
		Made by <a class="orange-text text-lighten-3" href="http://materializecss.com">Materialize</a>
		</div>
		</div>
	</footer>

	<!--JavaScript at end of body for optimized loading-->
	<script type="text/javascript" th:src="@{/webjars/materializecss/js/materialize.min.js}"></script>
	</body>
</html>